<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turtle Core</title>
    <link rel="manifest" href="./manifest.json" />
    <link rel="icon" href="favicon.svg" />
    <meta property="og:title" content="Turtle Core" />
    <meta property="og:description" content="Educational game for kids" />
    <meta
      property="og:image"
      content="https://turtle-quest.vercel.app/images/screenshot.png"
    />
    <meta property="og:image:alt" content="Gameplay screenshot" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Turtle Core" />
    <meta name="twitter:description" content="Educational game for kids" />
    <meta
      name="twitter:image"
      content="https://turtle-quest.vercel.app/images/screenshot.png"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script type="module" src="src/main.ts" blocking="render"></script>
  </head>
  <body class="select-none touch-none">
    <template id="menuItemTemplate">
      <style>
        span {
          @apply text-primary text-5xl cursor-pointer;
        }
      </style>
      <span role="button"><slot></slot></span>
    </template>
    <template id="prettyDialogTemplate">
      <style>
        dialog:open {
          @apply inset-0 border-0 flex flex-col gap-2 items-center justify-center text-white w-4/5 opacity-80 focus:opacity-95 transition-opacity duration-500 bg-gray-900 p-5 rounded-3xl max-w-xl z-50 animate-pulse animate-[500ms];
        }

        .heading {
          @apply flex justify-center items-center gap-2 border-b-white border-b-2 pb-2;
        }

        .title {
          @apply text-xl font-extrabold text-primary;
        }

        .content {
          @apply flex flex-col gap-2 max-h-32 sm:max-h-full overflow-y-auto;
        }

        .footer {
          @apply flex gap-2 justify-center items-center w-full;
        }
      </style>
      <dialog role="dialog">
        <div class="heading">
          <h1 class="title"><slot name="title"></slot></h1>
        </div>
        <div class="content">
          <slot name="content"></slot>
        </div>
        <div class="footer">
          <slot name="footer"></slot>
        </div>
      </dialog>
    </template>
    <template id="prettyButtonTemplate">
      <style>
        button {
          @apply rounded-md text-xl text-white pl-2 pr-2 w-fit border-0 cursor-pointer;
        }

        .default {
          @apply bg-primary;
        }

        .danger {
          @apply bg-danger;
        }
      </style>
      <button type="button" role="button" class="default">
        <slot></slot>
      </button>
    </template>
    <template id="gameControlTemplate">
      <style>
        button {
          @apply rounded-7xl w-20 h-20 bg-black opacity-50 hover:opacity-70 text-white cursor-pointer flex justify-center items-center transition-opacity border-0;
        }
      </style>
      <button type="button"><slot></slot></button>
    </template>
    <template id="gameGaugeTemplate">
      <style>
        .outerContainer {
          @apply flex flex-col gap-1;
        }

        .label {
          @apply flex gap-2 items-center text-primary font-semibold text-lg;
        }
      </style>
      <div class="outerContainer">
        <div class="label">
          <slot name="icon"></slot><slot name="label"></slot>
        </div>
        <meter max="100" min="0" low="30" value="100" title="100%"></meter>
      </div>
    </template>
    <div class="max-w-screen max-h-screen portrait:hidden">
      <div
        id="menuContainer"
        class="flex flex-col justify-between bg-cute bg-no-repeat bg-center bg-cover p-5 items-center h-screen w-screen"
      >
        <div class="flex gap-5 justify-center items-center">
          <h1 id="title" class="text-5xl font-bold" role="button">
            <span class="text-emerald-300">Turtle</span>
            <span class="text-cyan-500">Core</span>
          </h1>
          <span class="text-sm font-light">Beta</span>
          <a href="_github_" target="_blank" title="_github_">
            <i data-lucide="github" class="text-primary text-4xl"></i>
          </a>
          <a href="_instagram_" target="_blank" title="_instagram_">
            <i data-lucide="instagram" class="text-primary text-4xl"></i>
          </a>
          <a href="_youtube_" target="_blank" title="_youtube_">
            <i data-lucide="youtube" class="text-primary text-4xl"></i>
          </a>
          <div id="loginButtons"></div>
        </div>
        <div class="flex flex-col items-center gap-5">
          <menu-item id="newGameBtn">New Game</menu-item>
          <menu-item id="continueGameBtn">Continue Game</menu-item>
          <menu-item id="instructionsBtn">Instructions</menu-item>
        </div>
      </div>
      <div
        id="gameContainer"
        class="hidden h-screen items-center justify-center flex-col"
      >
        <div class="flex gap-2 items-center">
          <i
            role="button"
            id="pauseBtn"
            class="text-primary"
            data-lucide="pause"
          ></i>
          <div class="text-primary text-3xl font-semibold">
            <span id="xpSpan">0</span> XP
          </div>
          <game-gauge id="lifeGauge"
            ><span slot="icon"><i data-lucide="heart-pulse"></i></span
            ><span slot="label">Life</span></game-gauge
          >
          <game-gauge id="foodGauge"
            ><span slot="icon"><i data-lucide="shrimp"></i></span
            ><span slot="label">Food</span></game-gauge
          >
          <game-gauge id="apetiteGauge"
            ><span slot="label">Apetite</span></game-gauge
          >
          <game-gauge id="oxygenGauge"
            ><span slot="icon"><i data-lucide="air-vent"></i></span
            ><span slot="label">Oxygen</span></game-gauge
          >
        </div>
        <canvas id="gameCanvas" height="400" width="700" tab-index="1"></canvas>
        <div class="fixed bottom-1 right-1">
          <div class="mb-1 flex justify-center">
            <game-control id="upControl"
              ><i
                data-lucide="circle-chevron-up"
                class="text-primary w-9 h-9"
              ></i
            ></game-control>
          </div>
          <div class="flex gap-1">
            <game-control id="leftControl"
              ><i
                data-lucide="circle-chevron-left"
                class="text-primary w-9 h-9"
              ></i
            ></game-control>
            <game-control id="downControl"
              ><i
                data-lucide="circle-chevron-down"
                class="text-primary w-9 h-9"
              ></i>
            </game-control>
            <game-control id="rightControl">
              <i
                data-lucide="circle-chevron-right"
                class="text-primary w-9 h-9"
              ></i>
            </game-control>
          </div>
        </div>
      </div>
    </div>
    <div class="landscape:hidden flex justify-center items-center bg-red-700">
      <p class="text-white">
        Unable to play game in portrait mode. Please switch your device to
        landscape mode or install the Progressive Web App in Chrome, Edge or
        Firefox with the Progressive Web App addon.
      </p>
    </div>
    <pretty-dialog id="instructionsDialog">
      <span slot="title">Instructions</span>
      <div slot="content">
        <div class="flex flex-col gap-1 justify-center items-center">
          <p>
            Help Peppa the loggerhead turtle to her nesting grounds. Use the
            provided on-screen arrows to move the turtle. W,A,S,D or arrow keys
            may also be used to control the turtle.
          </p>
          <p>
            Move Peppa to the right end of the screen in order to pass each
            level. Eat prey and avoid obstacles.
          </p>
          <p>Good luck!</p>
          <p>
            Yours turtley,
            <br />
            Daniel - Game Developer
          </p>
        </div>
        <figure class="flex flex-col justify-center items-center gap-1">
          <img src="/images/babyTurtle.jpg" alt="Baby turtle" class="w-full" />
          <figcaption class="font-light italic text-sm">
            Photo by Steff Cutajar from GÄ§adira nest excavation (2025)
          </figcaption>
        </figure>
      </div>
      <div slot="footer">
        <pretty-button id="closeInstructionsBtn">Close</pretty-button>
      </div>
    </pretty-dialog>
    <pretty-dialog id="aboutDialog">
      <span slot="title">About Turtle Core</span>
      <div slot="content">
        <div class="flex flex-col justify-center items-center gap-2">
          <i data-lucide="turtle" class="w-16 h-16 text-primary"></i>
          <a
            id="version"
            href="https://github.com/danieldesira/TurtleQuest/blob/master/changelog.md"
            target="_blank"
            title="Changelog"
          >
          </a>
          <div class="flex gap-2">
            <a
              href="https://github.com/danieldesira/TurtleQuest/blob/master/contributors.md"
              target="_blank"
              title="Credits"
            >
              Credits
            </a>
            <a
              href="https://github.com/danieldesira/TurtleQuest/blob/master/license.md"
              target="_blank"
              title="License"
            >
              License
            </a>
            <a
              href="https://github.com/danieldesira/TurtleQuest/blob/master/DEDICATIONS.md"
              target="_blank"
              title="License"
            >
              Dedications
            </a>
          </div>
        </div>
      </div>
      <div slot="footer">
        <pretty-button id="closeAboutBtn">Close</pretty-button>
      </div>
    </pretty-dialog>
    <pretty-dialog id="customDialog">
      <span slot="title" id="customDialogTitle"></span>
      <div slot="content" id="customDialogContent"></div>
      <div slot="footer" id="customDialogFooter">
        <pretty-button id="closeCustomDialogBtn">OK</pretty-button>
      </div>
    </pretty-dialog>
    <pretty-dialog id="gameEndDialog">
      <span slot="title" id="gameEndDialogTitle"></span>
      <div slot="content" id="gameEndDialogContent"></div>
      <div slot="footer">
        <pretty-button id="gameEndDialogShareBtn">Share</pretty-button>
        <pretty-button id="gameEndDialogCloseBtn">Close</pretty-button>
      </div>
    </pretty-dialog>
    <div
      id="overlay"
      class="hidden justify-center items-center fixed top-0 h-screen w-screen bg-slate-950 opacity-0 transition-opacity transition-duration-[400ms]"
    >
      <span id="overlayText" class="text-primary text-3xl font-bold"></span>
    </div>
    <pretty-dialog id="gamePausedDialog">
      <span slot="title">Game Paused</span>
      <div slot="content">
        Game paused. Click the <strong>Resume</strong> button to continue.
      </div>
      <div slot="footer">
        <pretty-button id="resumeBtn">Resume</pretty-button>
      </div>
    </pretty-dialog>
  </body>
</html>
