const e=self,i=async t=>await(await fetch("http://localhost:32768/api/subscription",{method:"POST",headers:{"Accept-Content":"application/json"},body:JSON.stringify(t)})).json(),n=t=>t?new TextDecoder("utf-8").decode(t):"";e.addEventListener("activate",async()=>{const t=await e.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BDRd50z5ESS32mFqaLVJIT-Ap-EgwELoHWo2BFa5_oZSGHKLtQcM3w4-nEA2XOnM6QMN1zYApbs4SjjQgt56rQk"});await i({endpoint:t.endpoint,p256dh:n(t.getKey("p256dh")),auth:n(t.getKey("auth"))})});e.addEventListener("push",()=>{e.registration.getNotifications()});
